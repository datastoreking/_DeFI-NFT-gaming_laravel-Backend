(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["packageUser-coupon"],{"0424":function(t,o,i){t.exports=i.p+"static/img/user14.14b0c054.png"},"481e":function(t,o,i){"use strict";i.r(o);var n=i("6afd"),e=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(o,t,(function(){return n[t]}))}(s);o["default"]=e.a},"63e7":function(t,o,i){var n=i("ee2f");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var e=i("4f06").default;e("039b9537",n,!0,{sourceMap:!1,shadowMode:!1})},"6afd":function(t,o,i){"use strict";var n=i("4ea4");i("d81d"),i("2ca0"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e=n(i("ad02")),s={components:{jyfParser:e.default},data:function(){return{baseurl:this.$common.baseUrl,id:0,classList:[{name:"我的券"},{name:"参与中"}],currentTab:0,activeStyle:{color:"#FFD700",transform:"scale(1.1)"},inactive:{color:"#30C9C9",transform:"scale(1)"},show:!1,isLocal:!0,couponList:[],showPopup:!1,score:"",nickname:"",s_img:"",showRuler:!1,title:"",content:"",is_wait:!1,waitList:[],rule_id:"",all:!1}},onLoad:function(t){var o=this;this.userInfo(),t.id?(this.currentTab=1,this.$Request.post(this.$api.user.couponDraw,{id:t.id}).then((function(t){console.log("领券",t),1==t.code?o.$refs.uToast.show({message:t.msg,duration:800,type:"success"}):o.$refs.uToast.show({message:t.msg,duration:1200,type:"warning"}),o.getJoinCoupon()}))):this.getMyCoupon()},onShareAppMessage:function(t){return"button"===t.from&&(console.log(t.target),this.showPopup=!1),{title:"你的好友"+this.nickname+"送给你1张优惠券，快来一起抽赏吧~",path:"/packageUser/coupon?id="+this.id,imageUrl:this.baseurl+this.s_img}},methods:{waitClick:function(){var t=this;this.is_wait=!this.is_wait,this.is_wait?(this.waitList=[],this.couponList.map((function(o,i){o.is_merge||t.waitList.push(o)}))):this.getMyCoupon()},isSelect:function(t,o){console.log(o),o.state?o.state=0:o.state=1,this.rule_id="";for(var i=0,n=0;n<this.waitList.length;n++)1==this.waitList[n].state&&(this.rule_id=this.rule_id+","+this.waitList[n].id,i++,this.rule_id.startsWith(",")&&(this.rule_id=this.rule_id.substring(1)));this.count=i,this.count==this.waitList.length?this.all=!0:this.all=!1},allSelect:function(){this.all=!this.all,this.rule_id="";for(var t=0;t<this.waitList.length;t++)this.all&&(this.waitList[t].state=1,this.rule_id=this.rule_id+","+this.waitList[t].id,this.rule_id.startsWith(",")&&(this.rule_id=this.rule_id.substring(1))),this.all||(this.waitList[t].state=0,this.rule_id="");console.log(this.rule_id)},mergeClick:function(){var t=this;this.$Request.post(this.$api.user.couponMerge,{id:this.rule_id}).then((function(o){1==o.code?(t.is_wait=!1,t.getMyCoupon(),t.rule_id="",t.$refs.uToast.show({message:o.msg,duration:800,type:"success"})):t.$refs.uToast.show({message:o.msg,duration:1200,type:"warning"})}))},userInfo:function(){var t=this;this.$Request.post(this.$api.user.userInfo).then((function(o){t.nickname=o.data.nickname}))},getMyCoupon:function(){var t=this;uni.showLoading({title:"加载中..."}),this.$Request.post(this.$api.user.couponList).then((function(o){console.log("我的券",o),1!=o.code&&0!=o.code||(uni.hideLoading(),o.data.length?t.isLocal=!0:t.isLocal=!1),t.couponList=o.data}))},getJoinCoupon:function(){var t=this;uni.showLoading({title:"加载中..."}),this.$Request.post(this.$api.user.couponJoin).then((function(o){console.log("我的券",o),1!=o.code&&0!=o.code||(uni.hideLoading(),o.data.length?t.isLocal=!0:t.isLocal=!1),t.couponList=o.data}))},tabClick:function(t){this.currentTab=t.index,this.is_wait=!1,t.index?this.getJoinCoupon():this.getMyCoupon()},chooseCoupon:function(t){this.id=t.id,this.s_img=t.image,this.showPopup=!0},openClick:function(t){var o=this;this.$Request.post(this.$api.user.couponOpen,{id:t.id}).then((function(t){console.log("开券",t),1==t.code?(o.show=!0,o.score=t.data.score,o.getJoinCoupon()):o.$refs.uToast.show({message:t.msg,duration:800,type:"warning"})}))},getRuler:function(t){var o=this;this.$Request.post(this.$api.common.single,{id:t}).then((function(t){console.log("两个规则",t),1==t.code&&(o.showRuler=!0,o.title=t.data.title,o.content=t.data.content)}))}}};o.default=s},"744d":function(t,o,i){"use strict";i.d(o,"b",(function(){return e})),i.d(o,"c",(function(){return s})),i.d(o,"a",(function(){return n}));var n={uTabs:i("0d49").default,uIcon:i("6aa6").default,uOverlay:i("2f69").default,uPopup:i("b45d").default,uToast:i("c0b3").default},e=function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("v-uni-view",{staticClass:"coupon-root"},[n("v-uni-view",{staticClass:"top-both"},[n("v-uni-view",{staticClass:"tab-box"},[n("u-tabs",{attrs:{list:t.classList,current:t.currentTab,lineWidth:"45",lineColor:"#FFD700",activeStyle:t.activeStyle,inactiveStyle:t.inactive},on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.tabClick.apply(void 0,arguments)}}})],1),n("v-uni-view",{staticClass:"right-icon"},[n("u-icon",{attrs:{name:"error-circle",color:"#cccccc"}}),n("v-uni-view",{staticClass:"name",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.getRuler(11)}}},[t._v("赠送说明")])],1)],1),t.is_wait?n("v-uni-view",{staticClass:"select"},[t.all?n("v-uni-image",{attrs:{src:i("a3d0"),mode:""},on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.allSelect.apply(void 0,arguments)}}}):n("v-uni-image",{attrs:{src:i("47e8"),mode:""},on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.allSelect.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"all"},[t._v("全选")])],1):t._e(),t.is_wait?t._e():n("v-uni-view",{staticClass:"coupon-list"},t._l(t.couponList,(function(o,i){return n("v-uni-view",{key:i,staticClass:"single-coupon"},[n("v-uni-view",{staticClass:"coupon-right"},[n("v-uni-view",{staticClass:"left"},[t._v(t._s(o.level)),o.is_merge?n("v-uni-text",[t._v("+")]):t._e()],1),n("v-uni-view",{staticClass:"mid"},[n("v-uni-view",{staticClass:"name"},[t._v(t._s(o.level)+"级潮玩券")]),n("v-uni-view",{staticClass:"tags"},[t._v("可随机开出"+t._s(o.min_score)+"-"+t._s(o.max_score)+"潮玩币")])],1),t.currentTab?n("v-uni-button",{attrs:{plain:!0},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openClick(o)}}},[t._v("开券")]):n("v-uni-button",{attrs:{plain:!0},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.chooseCoupon(o)}}},[t._v("分享")])],1)],1)})),1),t.is_wait?n("v-uni-view",{staticClass:"coupon-list"},t._l(t.waitList,(function(o,e){return n("v-uni-view",{key:e,staticClass:"single-coupon"},[n("v-uni-view",{staticClass:"select-box",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.isSelect(e,o)}}},[o.state?n("v-uni-image",{attrs:{src:i("a3d0"),mode:""}}):n("v-uni-image",{attrs:{src:i("47e8"),mode:""}})],1),n("v-uni-view",{staticClass:"coupon-right"},[n("v-uni-view",{staticClass:"left"},[t._v(t._s(o.level)),o.is_merge?n("v-uni-text",[t._v("+")]):t._e()],1),n("v-uni-view",{staticClass:"mid"},[n("v-uni-view",{staticClass:"name"},[t._v(t._s(o.level)+"级潮玩券")]),n("v-uni-view",{staticClass:"tags"},[t._v("可随机开出"+t._s(o.min_score)+"-"+t._s(o.max_score)+"潮玩币")])],1),t.currentTab?n("v-uni-button",{attrs:{plain:!0},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openClick(o)}}},[t._v("开券")]):n("v-uni-button",{attrs:{plain:!0},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.chooseCoupon(o)}}},[t._v("分享")])],1)],1)})),1):t._e(),n("v-uni-view",{staticClass:"btn-img"},[t.currentTab||t.is_wait?t._e():n("v-uni-view",{staticClass:"btn",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.waitClick.apply(void 0,arguments)}}},[t._v("选择合成")]),!t.currentTab&&t.is_wait?n("v-uni-view",{staticClass:"btn3",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.is_wait=!t.is_wait,t.all=!1}}},[t._v("取消")]):t._e(),!t.currentTab&&t.is_wait?n("v-uni-view",{staticClass:"btn2",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.mergeClick.apply(void 0,arguments)}}},[t._v("合成")]):t._e()],1),n("u-overlay",{attrs:{show:t.showRuler}},[n("v-uni-view",{staticClass:"coupon-box"},[n("v-uni-view",{staticClass:"bg-box"},[n("v-uni-image",{staticClass:"close",attrs:{src:i("7830"),mode:""},on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.showRuler=!1}}}),n("v-uni-view",{staticClass:"title"},[t._v(t._s(t.title))]),n("v-uni-scroll-view",{attrs:{"scroll-y":"true"}},[n("v-uni-view",{staticClass:"content"},[n("jyfParser",{attrs:{html:t.content}})],1)],1),n("v-uni-view",{staticClass:"iknow",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.showRuler=!1}}},[t._v("知道了")])],1)],1)],1),n("u-overlay",{attrs:{show:t.show}},[n("v-uni-view",{staticClass:"showcoupon-box"},[n("v-uni-view",{staticClass:"bg-coupon"},[n("v-uni-view",{staticClass:"title"},[t._v("恭喜获得")]),n("v-uni-view",{staticClass:"mid-icon"},[n("v-uni-image",{attrs:{src:i("0424"),mode:""}}),n("v-uni-view",{staticClass:"num"},[t._v("*"),n("v-uni-text",[t._v(t._s(t.score))])],1)],1)],1),n("v-uni-image",{staticClass:"know",attrs:{src:i("d6d0"),mode:""},on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.show=!1}}})],1)],1),n("u-popup",{attrs:{show:t.showPopup,mode:"center",round:10},on:{close:function(o){arguments[0]=o=t.$handleEvent(o),t.showPopup=!1}}},[n("v-uni-view",{staticClass:"popup-box"},[n("v-uni-view",{staticClass:"title"},[t._v("提示")]),n("v-uni-view",{staticClass:"name"},[t._v("确定分享该优惠券么？")]),n("v-uni-view",{staticClass:"btn-two"},[n("v-uni-button",{staticClass:"no",attrs:{plain:!0},on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.showPopup=!1}}},[t._v("取消")]),n("v-uni-button",{staticClass:"yes",attrs:{plain:!0,"open-type":"share"}},[t._v("确定")])],1)],1)],1),t.isLocal?t._e():n("v-uni-view",{staticClass:"no-list"},[n("v-uni-image",{attrs:{src:i("cba4"),mode:""}}),n("v-uni-view",{},[t._v("暂无数据内容")])],1),n("u-toast",{ref:"uToast"})],1)},s=[]},7795:function(t,o,i){"use strict";var n=i("63e7"),e=i.n(n);e.a},8711:function(t,o,i){t.exports=i.p+"static/img/user17.583494b5.png"},a6f6:function(t,o,i){"use strict";i.r(o);var n=i("744d"),e=i("481e");for(var s in e)"default"!==s&&function(t){i.d(o,t,(function(){return e[t]}))}(s);i("7795");var c,a=i("f0c5"),u=Object(a["a"])(e["default"],n["b"],n["c"],!1,null,"7b2c6ec0",null,!1,n["a"],c);o["default"]=u.exports},cba4:function(t,o,i){t.exports=i.p+"static/img/index51.b2148d93.png"},ee2f:function(t,o,i){var n=i("24fb"),e=i("1de5"),s=i("f072"),c=i("b6b1"),a=i("c129"),u=i("8711");o=n(!1);var r=e(s),l=e(c),d=e(a),p=e(u);o.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.coupon-root[data-v-7b2c6ec0]{width:100%;min-height:100vh;background-color:#000;position:relative;padding-bottom:%?200?%}.coupon-root .top-both[data-v-7b2c6ec0]{width:100%;padding:%?20?%;display:flex;align-items:center;justify-content:space-between;margin-bottom:%?10?%}.coupon-root .top-both .tab-box[data-v-7b2c6ec0]{width:50%}.coupon-root .top-both .right-icon[data-v-7b2c6ec0]{display:flex;align-items:center;font-size:%?24?%;color:#ccc}.coupon-root .top-both .right-icon .name[data-v-7b2c6ec0]{margin-left:%?10?%}.coupon-root .select[data-v-7b2c6ec0]{width:100%;display:flex;align-items:center;padding:0 %?0?% %?20?% %?20?%;color:#fff}.coupon-root .select uni-image[data-v-7b2c6ec0]{width:%?48?%;height:%?48?%;margin-right:%?15?%}.coupon-root .coupon-list[data-v-7b2c6ec0]{width:100%;margin-top:%?20?%}.coupon-root .coupon-list .single-coupon[data-v-7b2c6ec0]{width:100%;display:flex;align-items:center;margin-bottom:%?35?%}.coupon-root .coupon-list .single-coupon .select-box[data-v-7b2c6ec0]{width:%?48?%;height:%?48?%;margin-left:%?20?%}.coupon-root .coupon-list .single-coupon .select-box uni-image[data-v-7b2c6ec0]{width:100%;height:100%}.coupon-root .coupon-list .single-coupon .coupon-right[data-v-7b2c6ec0]{width:%?594?%;height:%?232?%;display:flex;align-items:center;justify-content:space-between;background-image:url('+r+");background-size:100% 100%;padding:0 %?45?% 0 %?55?%;margin:%?0?% auto}.coupon-root .coupon-list .single-coupon .coupon-right .left[data-v-7b2c6ec0]{font-size:%?160?%;font-weight:600;margin-right:%?10?%;color:#2086fc}.coupon-root .coupon-list .single-coupon .coupon-right .left uni-text[data-v-7b2c6ec0]{font-size:%?56?%}.coupon-root .coupon-list .single-coupon .coupon-right .mid[data-v-7b2c6ec0]{flex:1;height:100%;display:flex;flex-direction:column;justify-content:space-around;padding:%?45?% 0 %?45?% %?5?%}.coupon-root .coupon-list .single-coupon .coupon-right .mid .name[data-v-7b2c6ec0]{font-size:%?30?%;font-weight:700}.coupon-root .coupon-list .single-coupon .coupon-right .mid .tags[data-v-7b2c6ec0]{font-size:%?24?%}.coupon-root .coupon-list .single-coupon .coupon-right uni-button[data-v-7b2c6ec0]{border:none;color:#2086fc;font-size:%?32?%}.coupon-root .btn-img[data-v-7b2c6ec0]{width:100%;position:fixed;bottom:%?120?%;display:flex;align-items:center;justify-content:center;font-size:%?30?%}.coupon-root .btn-img .btn[data-v-7b2c6ec0]{width:%?404?%;height:%?68?%;background-color:gold;z-index:2;display:flex;align-items:center;justify-content:center}.coupon-root .btn-img .btn2[data-v-7b2c6ec0]{width:%?254?%;height:%?68?%;background-color:gold;z-index:2;display:flex;align-items:center;justify-content:center;margin:0 %?30?%}.coupon-root .btn-img .btn3[data-v-7b2c6ec0]{width:%?254?%;height:%?68?%;background-color:#ccc;z-index:2;display:flex;align-items:center;justify-content:center;margin:0 %?30?%}.coupon-root .coupon-box[data-v-7b2c6ec0]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.coupon-root .coupon-box .bg-box[data-v-7b2c6ec0]{width:%?693?%;height:%?993?%;background-image:url("+l+");background-size:100% 100%;position:relative;padding:%?50?% %?30?% 0 %?30?%}.coupon-root .coupon-box .bg-box .close[data-v-7b2c6ec0]{position:absolute;width:%?46?%;height:%?46?%;top:%?20?%;right:%?20?%}.coupon-root .coupon-box .bg-box .title[data-v-7b2c6ec0]{width:100%;text-align:center;font-size:%?42?%;font-weight:700;color:#0080ff;margin-bottom:%?50?%}.coupon-root .coupon-box .bg-box .content[data-v-7b2c6ec0]{width:100%;height:%?670?%;padding:%?10?% %?15?%}.coupon-root .coupon-box .iknow[data-v-7b2c6ec0]{width:%?216?%;height:%?97?%;padding-top:%?20?%;background-image:url("+d+");background-size:100% 100%;display:flex;justify-content:center;color:#fff;font-size:%?30?%;font-weight:700;margin:0 auto;margin-top:%?20?%}.coupon-root .showcoupon-box[data-v-7b2c6ec0]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#000;padding-bottom:%?120?%}.coupon-root .showcoupon-box .bg-coupon[data-v-7b2c6ec0]{width:%?750?%;height:%?856?%;background-image:url("+p+");background-size:100% 100%;padding:%?60?% %?0?%}.coupon-root .showcoupon-box .bg-coupon .title[data-v-7b2c6ec0]{width:100%;text-align:center;font-size:%?42?%;font-weight:700;color:#fff;margin-bottom:%?30?%}.coupon-root .showcoupon-box .bg-coupon .mid-icon[data-v-7b2c6ec0]{width:100%;display:flex;align-items:flex-end;justify-content:center;margin-top:%?80?%;color:#fff}.coupon-root .showcoupon-box .bg-coupon .mid-icon uni-image[data-v-7b2c6ec0]{width:%?458?%;height:%?458?%}.coupon-root .showcoupon-box .bg-coupon .mid-icon .num[data-v-7b2c6ec0]{font-size:%?100?%}.coupon-root .showcoupon-box .bg-coupon .mid-icon .num uni-text[data-v-7b2c6ec0]{color:#ffe600}.coupon-root .showcoupon-box .know[data-v-7b2c6ec0]{width:%?404?%;height:%?68?%}.coupon-root .popup-box[data-v-7b2c6ec0]{width:%?550?%;display:flex;flex-direction:column;align-items:center;justify-content:space-around;padding-bottom:0}.coupon-root .popup-box .title[data-v-7b2c6ec0]{font-size:%?30?%;font-weight:700;padding:%?30?%}.coupon-root .popup-box .btn-two[data-v-7b2c6ec0]{width:100%;display:flex;align-items:center;justify-content:space-around;margin-bottom:0;padding:%?30?%}.coupon-root .popup-box .btn-two .no[data-v-7b2c6ec0]{width:%?140?%;height:%?60?%;padding:0;margin:0;padding:%?10?% %?35?%;background-color:#ccc;border-radius:%?10?%;color:#fff;font-size:%?28?%;border:none;line-height:%?46?%}.coupon-root .popup-box .btn-two .yes[data-v-7b2c6ec0]{background-color:gold;width:%?140?%;height:%?60?%;margin:0;padding:%?10?% %?35?%;border-radius:%?10?%;font-size:%?28?%;border:none;line-height:%?46?%}.coupon-root .no-list[data-v-7b2c6ec0]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;margin-top:%?50?%}.coupon-root .no-list uni-image[data-v-7b2c6ec0]{width:%?234?%;height:%?311?%;margin-bottom:%?10?%}",""]),t.exports=o}}]);